---
sidebar_position: 2
sidebar_label: Общие модули
title: Общие модули
---
Назначение ключевых свойств

| Свойство | Для чего нужно | Важные нюансы |
|---|---|---|
| **Сервер** | Исполнение кода *на сервере*. Доступ к серверным функциям (работа с ИБ, безопасность). | Без `Клиент`. Из клиента вызывается через `ВыполнитьНаСервере()` |
| **ВызовСервера** | Позволяет вызывать **экспортные** функции модуля *из клиентского кода напрямую*. | Работает только в паре с `Сервер`. Упрощает синтаксис. |
| **Клиент (Обычное)** | Исполнение кода *на клиенте*. Доступ к интерфейсу, диалогам, локальным данным. | Для толстого/управляемого клиента. |
| **Клиент (Управляемое)** | Исполнение кода *в веб-клиенте или тонком клиенте*. | |
| **ВнешнееСоединение** | Доступ к модулю *из внешних подключений* (COM, OLE, HTTP-сервисы, ВнешниеИсточникиДанных). | Нужен для интеграций, когда код запускается не из сеанса пользователя. |
| **ПовторноеИспользование** | Кэширование результатов функций для *одинаковых входных параметров*. | `НаВремяВызова` (до 20 мин от последнего вызова). `НаСеанс` (до конца сеанса). **Только простые типы параметров!** |

## Типовые комбинации свойств

| Сценарий использования | Рекомендуемые свойства |
|---|---|
| **Серверная логика, вызываемая из клиента** | `Сервер` + `ВызовСервера` |
| **Логика для внешних интеграций (COM, HTTP)** | `Сервер` + `ВнешнееСоединение` |
| **Обработчики событий (Подписки)** | `Сервер` (если логика серверная) + `ВнешнееСоединение` (если из COM) |
| **Глобальные утилиты** | `Сервер`/`Клиент` + `Глобальный` (осторожно!) |
| **Кэшируемый справочник настроек** | `Сервер` + `ПовторноеИспользование` |

## Критически важные нюансы

#### Повторное использование возвращаемых значений
*   **Параметры:** Только простые типы (`Неопределено`, `Null`, `Булево`, `Число`, `Строка`, `Дата`, `Ссылка`).
*   **Возвращаемые значения:** Рекомендуются иммутабельные (`ФиксированнаяСтруктура`, `ФиксированныйМассив`).
*   **Память:** Необоснованное использование → утечки памяти (кэш живет до 20 минут).
*   **Использовать если:** Результат часто нужен и стабилен (настройки, константы, справочники-списки).

#### Глобальный общий модуль
*   Функции доступны **без указания имени модуля**.
*   **Требование уникальности имен** функций в рамках всей конфигурации.
*   **Осторожно!** Может привести к конфликтам имен и усложнить чтение кода ("откуда эта функция?"

#### Вызов сервера
* Устанавливать признак "Вызов сервера" только для тех серверных общих модулей, чьи экспортные методы действительно должны вызываться с клиента
* Не устанавливать этот признак принудительно для всех серверных модулей — он должен быть осознанным и ограниченным
* Размещать в таких модулях только безопасные методы, которые передают клиенту только разрешенные данные (например, итоговые результаты расчетов, а не исходные или промежуточные данные, недоступные пользователю)
* Не размещать в модулях с "Вызов сервера" методы, использующие привилегированный режим, либо требующие повышенных прав доступа